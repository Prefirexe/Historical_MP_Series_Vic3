#Military

mandatory_service = {
	# Unlocks Army Model - National Militia
	era = era_1
	texture = "gfx/interface/icons/invention_icons/mandatory_service.dds"
	category = military
	
	modifier = {
		state_conscription_rate_mult = 0.2
		country_institution_conscription_max_investment_add = 1 #new
	}
	
	unlocking_technologies = {
		standing_army
	}
	
	ai_weight = {
		value = 2 # Important tech in general
	}
}

napoleonic_warfare = {
	# Unlocks Mobile Artillery PM in Barracks
	era = era_2
	texture = "gfx/interface/icons/invention_icons/napoleonic_warfare.dds"
	category = military
	
	unlocking_technologies = {
		line_infantry
		artillery
	}
	
	ai_weight = {
		value = 1.5 # Important tech in general
		
		if = {
			limit = { has_journal_entry = je_sick_man_army }
			add = 100
		}
	}
}

army_reserves = {
	era = era_2
	texture = "gfx/interface/icons/invention_icons/army_reserves.dds"
	category = military
	
	modifier = {
		state_conscription_rate_mult = 0.2
		country_institution_conscription_max_investment_add = 1 #new
	}
	
	unlocking_technologies = {	
		line_infantry
	}
	
	ai_weight = {
		value = 1
	}
}

line_infantry = {
	# Unlocks Line Infantry PM in Barracks
	era = era_2
	texture = "gfx/interface/icons/invention_icons/line_infantry.dds"
	category = military
	
	unlocking_technologies = {	
		mandatory_service
		military_drill
	}

	ai_weight = {
		value = 2 # Important tech in general
	}
}

field_works = {
	# Increases defense
	era = era_2
	texture = "gfx/interface/icons/invention_icons/field_works.dds"
	category = military
	
	modifier = {
		# defensive bonus, either directly to army or (ideally) a fortifications bonus, if we get forts
		# Lower kill rate?
		unit_morale_loss_mult = -0.05
		unit_army_defense_mult = 0.05
		unit_recovery_rate_add = 0.05
	}
	
	unlocking_technologies = {
		napoleonic_warfare
	}
	
	ai_weight = {
		value = 1
	}
}

general_staff = {
	# Unlocks Skirmish Infantry PM in Barracks / Conscription Centers
	era = era_3
	texture = "gfx/interface/icons/invention_icons/general_staff.dds"
	category = military
	
	unlocking_technologies = {	
		army_reserves
	}

	ai_weight = {
		value = 2 # Important tech in general
	}
	
}

enlistment_offices = {
	era = era_3
	texture = "gfx/interface/icons/invention_icons/enlistment_offices.dds"
	category = military
	
	modifier = {
		state_conscription_rate_mult = 0.2
		country_institution_conscription_max_investment_add = 1 #new
	}
	
	unlocking_technologies = {	
		logistics
	}
	
	ai_weight = {
		value = 1
	}
}

breech_loading_artillery = {
	# Unlocks Breech Loading Artillery Production PM in Arms Industries
	# Unlocks Breech Loading Artillery PM in Barracks
	# Unlocks Railway Guns PM in Railways
	era = era_4
	texture = "gfx/interface/icons/invention_icons/breech_loading_artillery.dds"
	category = military
	
	unlocking_technologies = {	
		#rifling
		shell_gun
		repeaters
	}
	
	ai_weight = {
		value = 1.5 # Important tech in general
	}
}

handcranked_machine_gun = {
	era = era_3
	texture = "gfx/interface/icons/invention_icons/handcranked_machine_gun.dds"
	category = military
	
	modifier = {
		unit_army_defense_add = 10 #was 5
		unit_kill_rate_add = 0.05
	}
	
	unlocking_technologies = {	
		repeaters
		#breech_loading_artillery
	}
	
	ai_weight = {
		value = 1
	}
}

trench_works = {
	# Unlocks Officer Training PM in Barracks
	# Unlocks Barbed Wire Fences in Livestock Ranches
	# Unlocks Trench Infantry
	era = era_4
	texture = "gfx/interface/icons/invention_icons/trench_works.dds"
	category = military
	
	unlocking_technologies = {
		general_staff
		electric_telegraph
		automatic_machine_guns
	}
	
	ai_weight = {
		value = 2 # important for everyone
	}
}

war_propaganda = {
	era = era_4
	texture = "gfx/interface/icons/invention_icons/war_propaganda.dds"
	category = military

	modifier = {
		unit_morale_loss_mult = -0.05
		state_conscription_rate_mult = 0.2
		country_institution_conscription_max_investment_add = 1 #new
	}
	
	unlocking_technologies = {	
		enlistment_offices
	}
	
	ai_weight = {
		value = 1
	}
}

wargaming = {
	# Unlocks Siege Artillery PM in Barracks
	# Reduces Morale loss
	era = era_4
	texture = "gfx/interface/icons/invention_icons/wargaming.dds"
	category = military

	modifier = {
		unit_army_offense_mult = 0.1
		unit_morale_loss_mult = -0.05
	}
	
	unlocking_technologies = {
		military_statistics
		breech_loading_artillery
	}
	
	ai_weight = {
		value = 1
	}
}

defense_in_depth = {
	# Increases defense
	# Unlock Delay Order?
	era = era_4
	texture = "gfx/interface/icons/invention_icons/defense_in_depth.dds"
	category = military
	
	modifier = {
		unit_morale_loss_mult = -0.05
		# defensive bonus, either to the army or ideally to fortifications
		unit_army_defense_mult = 0.05
		unit_recovery_rate_add = 0.05
	}
	
	unlocking_technologies = {	
		trench_works
	}
	
	ai_weight = {
		value = 1
	}
}
automatic_machine_guns = {
	# Unlocks Recoil Mechaniscm PM in Arms Factory
	# Unlocks Machine Gunners PMs in Barracks and Conscription Centers
	era = era_4
	texture = "gfx/interface/icons/invention_icons/machine_gun.dds"
	category = military
	
	unlocking_technologies = {	
		handcranked_machine_gun
		bolt_action_rifles
		breech_loading_artillery
	}
	
	ai_weight = {
		value = 1.5 # important for everyone
	}
}

stormtroopers = {
	# Unlocks Infiltrators PM in Barracks
	era = era_5
	texture = "gfx/interface/icons/invention_icons/stormtroopers.dds"
	category = military
	
	modifier = {
		unit_kill_rate_add = 0.05
		unit_combat_unit_type_trench_infantry_offense_add = 5
		unit_combat_unit_type_squad_infantry_offense_add = 5
		unit_combat_unit_type_mechanized_infantry_offense_add = 5
	}
	unlocking_technologies = {	
		wargaming
		trench_works
		flamethrowers
	}
	
	ai_weight = {
		value = 1
	}
}

concrete_fortifications = {
	# Increases defense
	era = era_5
	texture = "gfx/interface/icons/invention_icons/concrete_fortifications.dds"
	category = military
	
	modifier = {
		unit_morale_loss_mult = -0.05
		# build the maginot line and be completely unstoppable, forever, especially if you're France
		# bonus to general defensiveness or specifically to forts if they become a thing
		unit_army_defense_mult = 0.10
		unit_recovery_rate_add = 0.05
	}
	
	unlocking_technologies = {	
		defense_in_depth
	}
	
	ai_weight = {
		value = 1
	}
}
je_risorgimento = {
	icon = "gfx/interface/icons/event_icons/risorgimento.dds"
	
	group = je_group_historical_content

	is_shown_when_inactive = {
		OR = {
			country_has_primary_culture = cu:north_italian
			country_has_primary_culture = cu:south_italian
		}
		NOR = {
			is_revolutionary = yes
			is_secessionist = yes
		}
	}	
	
	#scripted_button = je_risorgimento_austrian_radicals_button
	scripted_button = je_risorgimento_italian_radicals_button_hmps
	scripted_button = hijack_italian_nationalism_button

	immediate = {
		cu:north_italian = {
			save_scope_as = north_italian_scope
		}
		cu:south_italian = {
			save_scope_as = south_italian_scope
		}
		set_variable = {
			name = risorgimento_progress
			value = 0
		}
	}
		
	possible = {
		NOR = {
			country_tier = hegemony
			country_tier = empire
		}
	}

	complete = {
		custom_tooltip = {
			text = je_risorgimento_success
			has_variable = hijacked_nationalism
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
		
	}
	
	fail = {
		custom_tooltip = {
			text = je_risorgimento_success
			has_variable = hijacked_nationalism
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}

	on_weekly_pulse = {
		events = {
			italian_unification.4
		}
		effect = {
			do_risorgimento_math = yes
		}
	}

	on_monthly_pulse = {
		random_events = {
			180 = 0
			20 = italian_unification.2
		}
		effect = {
			if = {
				limit = {
					ig:ig_intelligentsia = { is_in_government = yes }
				}
				change_variable = {
					name = risorgimento_progress
					add = 5
				}
			}
			if = {
				limit = {
					ig:ig_armed_forces = { is_in_government = yes }
				}
				change_variable = {
					name = risorgimento_progress
					add = 5
				}
			}
			if = {
				limit = {
					ig:ig_petty_bourgeoisie = { is_in_government = yes }
				}
				change_variable = {
					name = risorgimento_progress
					add = 5
				}
			}
			if = {
				limit = {
					ig:ig_landowners = { is_in_government = yes }
				}
				change_variable = {
					name = risorgimento_progress
					add = -5
				}
			}
			if = {
				limit = {
					ig:ig_devout = { is_in_government = yes }
				}
				change_variable = {
					name = risorgimento_progress
					add = -5
				}
			}
			if = {
				limit = {
					ig:ig_rural_folk = { is_in_government = yes }
				}
				change_variable = {
					name = risorgimento_progress
					add = -5
				}
			}
			if = {
				limit = {
					any_interest_group = { 
						OR = {
							leader = { has_ideology = ideology:ideology_radical }
							any_scope_character = {
								has_role = agitator
								has_ideology = ideology:ideology_radical
							}
						}
					}
				}
				change_variable = {
					name = risorgimento_progress
					add = 10
				}
			}
			if = {
				limit = {
					c:ROOT = { radical_fraction = { value >= 0.1 } }
				}
				change_variable = {
					name = risorgimento_progress
					add = 1
				}
			}
			if = {
				limit = {
					c:ROOT = { radical_fraction = { value >= 0.15 } }
				}
				change_variable = {
					name = risorgimento_progress
					add = 2
				}
			}
			if = {
				limit = {
					c:ROOT = { radical_fraction = { value >= 0.2 } }
				}
				change_variable = {
					name = risorgimento_progress
					add = 2
				}
			}
			if = {
				limit = {
					c:ROOT = { radical_fraction = { value >= 0.25 } }
				}
				change_variable = {
					name = risorgimento_progress
					add = 5
				}
			}
		}
	}

	on_complete = {
		show_as_tooltip = {
			trigger_event = { id = italian_unification.1 popup = yes }
		}
	}
	
	on_fail = {
		show_as_tooltip = {
			trigger_event = { id = italian_unification.1 popup = yes }
		}
		set_variable = failed_risorgimento
	}

	current_value = {
		value = root.var:risorgimento_progress
	}

	goal_add_value = {
		add = 200
	}
	
	progressbar = yes

	weight = 100

	should_be_pinned_by_default = yes
}
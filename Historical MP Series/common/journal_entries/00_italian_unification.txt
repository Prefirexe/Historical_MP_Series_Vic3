je_risorgimento = {
<<<<<<< HEAD
	icon = "gfx/interface/icons/event_icons/risorgimento.dds"
=======
	icon = "gfx/interface/icons/event_icons/waving_flag.dds"
>>>>>>> main
	
	group = je_group_historical_content

	is_shown_when_inactive = {
		OR = {
			country_has_primary_culture = cu:north_italian
			country_has_primary_culture = cu:south_italian
		}
		NOR = {
			is_revolutionary = yes
			is_secessionist = yes
		}
	}	
	
	#scripted_button = je_risorgimento_austrian_radicals_button
<<<<<<< HEAD
	scripted_button = je_risorgimento_italian_radicals_button_hmps
	scripted_button = hijack_italian_nationalism_button

	immediate = {
=======
	scripted_button = je_risorgimento_italian_radicals_button

	immediate = {
		set_variable = { name = italian_states_radicals_total_bar value = 0 }
>>>>>>> main
		cu:north_italian = {
			save_scope_as = north_italian_scope
		}
		cu:south_italian = {
			save_scope_as = south_italian_scope
		}
<<<<<<< HEAD
		set_variable = {
			name = risorgimento_progress
			value = 0
		}
	}
		
	possible = {
=======
		trigger_event = { id = italian_unification.10 popup = yes }
	}
		
	possible = {
		has_technology_researched = nationalism
>>>>>>> main
		NOR = {
			country_tier = hegemony
			country_tier = empire
		}
	}

	complete = {
<<<<<<< HEAD
		custom_tooltip = {
			text = je_risorgimento_success
			has_variable = hijacked_nationalism
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
		
	}
	
	fail = {
		custom_tooltip = {
			text = je_risorgimento_success
			has_variable = hijacked_nationalism
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}
	}
=======
		hidden_trigger = {
			has_variable = je_unification_progress
		}
		custom_tooltip = {
			text = is_italy_tt
			c:ITA ?= this
		}
		
	}
>>>>>>> main

	on_weekly_pulse = {
		events = {
			italian_unification.4
		}
		effect = {
<<<<<<< HEAD
			do_risorgimento_math = yes
=======
			if = {
				limit = {
					any_scope_state = {
						state_region = {
							OR = {
								is_homeland = cu:north_italian
								is_homeland = cu:south_italian
							}
						}
					}
				}
				do_risorgimento_math = yes
			}
>>>>>>> main
		}
	}

	on_monthly_pulse = {
		random_events = {
			180 = 0
			20 = italian_unification.2
		}
		effect = {
<<<<<<< HEAD
			if = {
				limit = {
					ig:ig_intelligentsia = { is_in_government = yes }
				}
				change_variable = {
					name = risorgimento_progress
					add = 5
				}
			}
			if = {
				limit = {
					ig:ig_armed_forces = { is_in_government = yes }
				}
				change_variable = {
					name = risorgimento_progress
					add = 5
				}
			}
			if = {
				limit = {
					ig:ig_petty_bourgeoisie = { is_in_government = yes }
				}
				change_variable = {
					name = risorgimento_progress
					add = 5
				}
			}
			if = {
				limit = {
					ig:ig_landowners = { is_in_government = yes }
				}
				change_variable = {
					name = risorgimento_progress
					add = -5
				}
			}
			if = {
				limit = {
					ig:ig_devout = { is_in_government = yes }
				}
				change_variable = {
					name = risorgimento_progress
					add = -5
				}
			}
			if = {
				limit = {
					ig:ig_rural_folk = { is_in_government = yes }
				}
				change_variable = {
					name = risorgimento_progress
					add = -5
				}
			}
			if = {
				limit = {
					any_interest_group = { 
						OR = {
							leader = { has_ideology = ideology:ideology_radical }
							any_scope_character = {
								has_role = agitator
								has_ideology = ideology:ideology_radical
							}
						}
					}
				}
				change_variable = {
					name = risorgimento_progress
					add = 10
				}
			}
			if = {
				limit = {
					c:ROOT = { radical_fraction = { value >= 0.1 } }
				}
				change_variable = {
					name = risorgimento_progress
					add = 1
				}
			}
			if = {
				limit = {
					c:ROOT = { radical_fraction = { value >= 0.15 } }
				}
				change_variable = {
					name = risorgimento_progress
					add = 2
				}
			}
			if = {
				limit = {
					c:ROOT = { radical_fraction = { value >= 0.2 } }
				}
				change_variable = {
					name = risorgimento_progress
					add = 2
				}
			}
			if = {
				limit = {
					c:ROOT = { radical_fraction = { value >= 0.25 } }
				}
				change_variable = {
					name = risorgimento_progress
					add = 5
				}
=======
			do_risorgimento_math = yes
			if = { 
				limit = { NOT = { has_variable = je_unification_progress } } 
				set_variable = je_unification_progress
>>>>>>> main
			}
		}
	}

	on_complete = {
		show_as_tooltip = {
			trigger_event = { id = italian_unification.1 popup = yes }
		}
	}
	
<<<<<<< HEAD
	on_fail = {
		show_as_tooltip = {
			trigger_event = { id = italian_unification.1 popup = yes }
		}
		set_variable = failed_risorgimento
	}

	current_value = {
		value = root.var:risorgimento_progress
	}

	goal_add_value = {
		add = 200
	}
	
	progressbar = yes
=======
	fail = {
		custom_tooltip = {
			text = owns_no_italian_homelands_tt
			NOT = {
				any_scope_state = {
					state_region = {
						OR = {
							is_homeland = cu:north_italian
							is_homeland = cu:south_italian
						}
					}
				}
			}
		}
	}

	current_value = {
		value = root.var:italian_states_radicals_total_bar
	}

	goal_add_value = {
		add = 25
	}

	progressbar = no
>>>>>>> main

	weight = 100

	should_be_pinned_by_default = yes
}